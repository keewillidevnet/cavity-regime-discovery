name: Validate Documentation

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  lint-markdown:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Set up Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
    
    - name: Install markdownlint-cli
      run: npm install -g markdownlint-cli
    
    - name: Lint Markdown files
      run: markdownlint '**/*.md' --ignore node_modules

  check-links:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Check for broken links
      uses: gaurav-nelson/github-action-markdown-link-check@v1
      with:
        use-quiet-mode: 'yes'
        config-file: '.github/workflows/mlc-config.json'
      continue-on-error: true

  validate-structure:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Check required files exist
      run: |
        files=(
          "README.md"
          "WHITEPAPER.md"
          "LICENSE"
          "docs/executive-summary.md"
          "docs/technical-architecture.md"
          "docs/training-data-strategy.md"
          "docs/stakeholder-analysis.md"
        )
        
        for file in "${files[@]}"; do
          if [ ! -f "$file" ]; then
            echo "Missing required file: $file"
            exit 1
          fi
        done
        
        echo "All required files present"
